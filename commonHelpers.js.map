{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["const API_KEY = '986738-8cdc2a7fdebdc51acfa5607bc';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', fetchImages);\nloadMoreBtn.style.display = 'none';\n\nfunction onSearch(event) {\n  event.preventDefault();\n  currentQuery = event.currentTarget.elements.searchQuery.value.trim();\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  if (currentQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  fetchImages();\n}\n\nasync function fetchImages() {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(currentQuery)}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n      });\n      return;\n    }\n\n    renderGallery(data.hits);\n    currentPage += 1;\n\n    if (currentPage > Math.ceil(data.totalHits / 40)) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    if (currentPage === 2) {\n      iziToast.success({\n        title: 'Hooray!',\n        message: `We found ${data.totalHits} images.`,\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  }\n}\n\nfunction renderGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a href=\"${largeImageURL}\" class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </a>\n    `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","form","gallery","loadMoreBtn","onSearch","fetchImages","event","url","data","renderGallery","error","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"ssBAAA,MAAMA,EAAU,mCACVC,EAAW,2BACjB,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvDF,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAW,EACjDF,EAAY,MAAM,QAAU,OAE5B,SAASC,EAASE,EAAO,CAOvB,GANAA,EAAM,eAAc,EACpBN,EAAeM,EAAM,cAAc,SAAS,YAAY,MAAM,OAC9DP,EAAc,EACdG,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAExBH,IAAiB,GAAI,CACvB,SAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDK,GACF,CAEA,eAAeA,GAAc,CAC3B,MAAME,EAAM,GAAGT,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAY,CAAC,iEAAiED,CAAW,eAExJ,GAAI,CAEF,MAAMS,EAAO,MADI,MAAM,MAAMD,CAAG,GACJ,OAE5B,GAAIC,EAAK,KAAK,SAAW,EAAG,CAC1B,SAAS,QAAQ,CACf,MAAO,UACP,QAAS,0EACjB,CAAO,EACD,MACD,CAEDC,EAAcD,EAAK,IAAI,EACvBT,GAAe,EAEXA,EAAc,KAAK,KAAKS,EAAK,UAAY,EAAE,GAC7CL,EAAY,MAAM,QAAU,OAC5B,SAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDA,EAAY,MAAM,QAAU,QAG1BJ,IAAgB,GAClB,SAAS,QAAQ,CACf,MAAO,UACP,QAAS,YAAYS,EAAK,SAAS,UAC3C,CAAO,CAEJ,OAAQE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,SAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACF,CACH,CAEA,SAASD,EAAcE,EAAQ,CAC7B,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,mBACvFL,CAAa;AAAA,wBACRD,CAAY,UAAUE,CAAI;AAAA;AAAA,qDAEGC,CAAK;AAAA,qDACLC,CAAK;AAAA,wDACFC,CAAQ;AAAA,yDACPC,CAAS;AAAA;AAAA;AAAA,KAG7D,EAAE,KAAK,EAAE,EAEZjB,EAAQ,mBAAmB,YAAaU,CAAM,EAE7B,IAAI,eAAe,YAAY,EACvC,QAAO,CAClB"}